<h2 id="heading1">NAME</h2>
<p class="indent">
<b><a href="./scripts.php?script=lsbounced">lsbounced</a></b>
- lists the original addressees of returned e-mail.
</p>
<h2 id="heading2">SYNOPSIS</h2>
<p class="indent">

<b><a href="./scripts.php?script=lsbounced">lsbounced</a></b>

[[
<b>-c </b>
<i>&lt;cc_addr&gt;</i>
]
[
<b>-d</b>
]
[
<b>-L </b>
<i>&lt;mail_box_directory&gt;</i>
]
[
<b>-l </b>
]
[
<b>-r </b>
<i>&lt;e-mail_recipient&gt;</i>
]
[
<b>-s </b>
]
[
<b>-v </b>
]
[
<b>-x </b>
<i>&lt;xclude_addr&gt;</i>
]

<i>&lt;mailbox&gt;</i>
] |
[
<b>-V </b>
]
<br/>
</p>
<h2 id="heading3">AVAILABILITY</h2>
<p class="indent">
<b><a href="./scripts.php?script=lsbounced">lsbounced</a></b>
is a Bourne shell script which should work equally well on all versions of UNIX,
Linux and Mac OS X.
</p>
<h2 id="heading4">DESCRIPTION</h2>
<p class="indent">
</p>
<p class="indent">
This utility was written for a company which was receiving a substantial amount of
bounced email after each mailout to it's clienT list.
</p>
<p class="indent">
<b><a href="./scripts.php?script=lsbounced">lsbounced</a></b>
uses "
<b>ssh</b>
"
to connect to an IMAP server and collects the addresses found in the nominated
mailbox using the local the file system. (NB. It is not possible to just use the
"From:" address as this is usually the recipient mail hosts "postmaster".) 
</p>
<p class="indent">
The addresses are cleaned up using
"
<b>sed</b>
" and turned into a sorted list of unique addresses.
The utility optionally formats the list using "
<b>groff</b>
" and "
<b>ghostview</b>
"
to produce a "pdf" file which can be presented on screen and e-mailed  to
specified recipients.
</p>
<h2 id="heading5">OPTIONS</h2>
<p class="indent">
</p>
<p class="indent">

<b>-c </b>
<i>&lt;cc_mail_address&gt;</i>

The 
<b>-c</b>&nbsp;&nbsp;&nbsp;
option is used to add 
<i>cc</i>
 addresses to which a copies of the report sent with the
<b>-r</b>&nbsp;&nbsp;&nbsp;
option should be sent. This may be a single address or a comma separated list.
The option is only relevant when the 
<b>-r option is also used. </b>
</p>
<p class="indent">
<b>-d</b>&nbsp;&nbsp;&nbsp;
Set debug mode on. 
The 
<b>-x</b>&nbsp;&nbsp;&nbsp;
 option is set within the shell
and each command in the script is echoed to the console.
</p>
<p class="indent">

<b>-L </b>
<i>&lt;directory&gt;</i>

The directory under which the mail messages are stored. 
"
<b><a href="./scripts.php?script=lsbounced">lsbounced</a></b>
" expects that the "
<b>Courier</b>
" imap server is being used with
virtual mailboxes and that each message is in a separate file.
</p>
<p class="indent">
<b>-l</b>&nbsp;&nbsp;&nbsp;
Use the local syslog facility to log that 
<b><a href="./scripts.php?script=lsbounced">lsbounced</a></b>
has been run and record the number of messages found and the number of unique address
extracted.
</p>
<p class="indent">

<b>-r </b>
<i>&lt;recipient_addr&gt;</i>

Send out the list with a covering letter to  the 
<i>&lt;recipient_addr&gt;</i>
.
</p>
<p class="indent">

<b>-s</b>&nbsp;&nbsp;&nbsp;

Use "
<b>gv</b>
" to show the list on screen in pdf format.
</p>
<p class="indent">
<b>-v</b>&nbsp;&nbsp;&nbsp;
Set verbose mode on. (Frankly verbose is somewhat of an exageration).
</p>
<p class="indent">
<i>&lt;mailbox&gt;</i>
The mail account to be examined.
</p>
<p class="indent">
<b>-V</b>&nbsp;&nbsp;&nbsp;
Print the version details and exit.
</p>
<h2 id="heading7">FILES</h2>
<p class="indent">
<i>/var/qmail/mailnames/&lt;mail_domain&gt;/&lt;virtual_user_name&gt;/Maildir/{cur,new}</i>
</p>
<h2 id="heading6">EXAMPLES</h2>
<p class="indent">

</p><div class="cmdline">
<pre>
lsbounced -s -r fulford@fulford.net -L /var/qmail/mailnames bounced.westbridgford.ingo
</pre></div>
<p class="indent">
</p>
<p class="indent">
Use 
<b>ssh</b>
to access 
<i>mailserver.neg.uk</i>.
Count then number of message file in the directories
 /var/qmail/mailnames/westbridgford.info/Maildir/{cur,new}.
Pass the messages through
<b>awk</b>
and
<b>sed</b>
filters to extract the original mail addresses to which the bounced messages were
sent.
</p>
<p class="indent">
Use
<b>groff</b>
and 
<b>ps2pdf</b>
to format the results and present a pdf file to screen. Send a copy of the report
to 
<i>fulford@fulford.net</i>.
</p>
<h2 id="heading8">BUGS</h2>
<p class="indent">
The script is quite crude and has very little, if any,  error checking.
The consequences of unexpected input are untested.
</p>
<h2 id="heading9">SEE ALSO</h2>
<p class="indent">
<a href="./scripts.php?script=chkmail&man=y"><i>chkmail</i>,</a>
<a href="./scripts.php?script=msg_cnt"><i>msg_cnt</i>,</a>
<a href="./scripts.php?script=msg_del"><i>msg_del</i>.</a>
</p>
<h2 id="heading10">AUTHOR</h2>
<p class="indent">
Clifford W Fulford, City Linux. Contact fulford@fulford.net or +44 (0)709 229 5385.
</p>
	
